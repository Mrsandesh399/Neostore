{"ast":null,"code":"var _jsxFileName = \"D:\\\\Neostore\\\\clint\\\\src\\\\component\\\\Cart.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { Button, Container, Table, Form, Row, Col, Card } from \"react-bootstrap\";\nimport Nav1 from \"../component/Nav\";\nimport Footer from \"../component/Footer\";\nimport { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router\";\nimport jwtDecode from 'jwt-decode';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Cart() {\n  _s();\n\n  let token = localStorage.getItem(\"_token\") !== undefined ? localStorage.getItem(\"_token\") : \"\";\n  let decode;\n  let email;\n\n  if (token !== null) {\n    decode = jwt_decode(token);\n    email = decode.oid;\n  }\n\n  const proceed = () => {\n    if (token !== null) {\n      localStorage.setItem(\"subtotal\", amount);\n      localStorage.setItem(\"gst\", gst);\n      localStorage.setItem(\"total\", grandtotal);\n      navigate(\"/checkout\");\n    } else {\n      alert(\"Login to buy\");\n      navigate(\"/login\");\n    }\n  };\n\n  let items = [];\n  const navigate = useNavigate();\n  const [cart, setCart] = useState([]);\n  let total = [0];\n  const [quantity, setQuantity] = useState(\"\");\n  useEffect(() => {\n    let cartItems = JSON.parse(localStorage.getItem(\"mycart\"));\n    setCart(cartItems);\n  }, []);\n  console.log(cart);\n\n  const onChangeHandler = event => {\n    setQuantity(event.target.value);\n    console.log(event.target.value);\n  };\n\n  let amount;\n  let gst;\n  let grandtotal;\n\n  const onAdd = product => {\n    const exist = cart.find(item => item._id === product._id);\n\n    if (exist) {\n      setCart(cart.map(item => item._id === product._id ? { ...exist,\n        quantity: exist.quantity + 1\n      } : item));\n      localStorage.setItem(\"mycart\", JSON.stringify(cart));\n    } else {\n      setCart([...cart, { ...product,\n        quantity: 1\n      }]);\n    }\n  };\n\n  const onRemove = product => {\n    const exist = cart.find(item => item._id === product._id);\n\n    if (exist.quantity === 1) {// setCart(cart.filter((item) => item._id !== product._id));\n    } else {\n      setCart(cart.map(item => item._id === product._id ? { ...exist,\n        quantity: exist.quantity - 1\n      } : item));\n      localStorage.setItem(\"mycart\", JSON.stringify(cart));\n    }\n  };\n\n  const onDelete = index => {\n    let lstore = JSON.parse(localStorage.getItem(\"mycart\"));\n    lstore.splice(index, 1);\n    console.log(lstore);\n    let setStore = JSON.stringify(lstore);\n    localStorage.setItem(\"mycart\", setStore);\n    setCart(lstore);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Nav1, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Container, {\n        style: {\n          backgroundColor: \"lightgray\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          striped: true,\n          bordered: true,\n          hover: true,\n          size: \"sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Sr.No\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Quantity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Total\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Action\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: cart ? cart.map((value, index) => {\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: index + 1\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 43\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: value.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 43\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    height: \"100px\",\n                    width: \"100px\",\n                    src: value.image\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 121,\n                    columnNumber: 48\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 43\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [value.price, \"/-\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 122,\n                  columnNumber: 43\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(Row, {\n                    children: [/*#__PURE__*/_jsxDEV(Col, {\n                      children: /*#__PURE__*/_jsxDEV(Button, {\n                        variant: \"dark\",\n                        onClick: () => onRemove(value),\n                        children: \"-\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 126,\n                        columnNumber: 55\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 125,\n                      columnNumber: 51\n                    }, this), /*#__PURE__*/_jsxDEV(Col, {\n                      children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                        type: \"number\",\n                        placeholder: \"Enter quantity\",\n                        min: \"1\",\n                        max: \"20\",\n                        value: value.quantity\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 136,\n                        columnNumber: 55\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 135,\n                      columnNumber: 51\n                    }, this), /*#__PURE__*/_jsxDEV(Col, {\n                      children: /*#__PURE__*/_jsxDEV(Button, {\n                        variant: \"dark\",\n                        onClick: () => onAdd(value),\n                        children: \"+\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 146,\n                        columnNumber: 55\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 145,\n                      columnNumber: 51\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 124,\n                    columnNumber: 47\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 123,\n                  columnNumber: 43\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: value.quantity * value.price\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 43\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"danger\",\n                    onClick: () => onDelete(index),\n                    children: \"Delete\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 161,\n                    columnNumber: 47\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 43\n                }, this), console.log(total.push(value.price * value.quantity))]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 39\n              }, this);\n            }) : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          style: {\n            width: \"20rem\",\n            margin: \"2rem\",\n            padding: \"1rem\",\n            textAlign: \"right\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Review Order\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"text-right\",\n            children: [\"Subtotal:\", \" \", (amount = total.reduce((result, number) => result + number)).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"text-right\",\n            children: [\" \", \"GST 18%:\", \" \", (gst = amount * 18 / 100).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"text-right\",\n            children: [\"Total:\", \" \", grandtotal = (amount + gst).toFixed(2), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 16\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"dark\",\n            onClick: () => proceed(),\n            children: \"Proceed To Buy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Cart, \"mu/cbWcxC85UFBhFdLyYQTEzNMY=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Cart;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"sources":["D:/Neostore/clint/src/component/Cart.js"],"names":["React","Button","Container","Table","Form","Row","Col","Card","Nav1","Footer","useEffect","useState","useNavigate","jwtDecode","Cart","token","localStorage","getItem","undefined","decode","email","jwt_decode","oid","proceed","setItem","amount","gst","grandtotal","navigate","alert","items","cart","setCart","total","quantity","setQuantity","cartItems","JSON","parse","console","log","onChangeHandler","event","target","value","onAdd","product","exist","find","item","_id","map","stringify","onRemove","onDelete","index","lstore","splice","setStore","backgroundColor","name","image","price","push","width","margin","padding","textAlign","reduce","result","number","toFixed"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Button, Container, Table, Form, Row, Col,Card } from \"react-bootstrap\";\r\nimport Nav1 from \"../component/Nav\"\r\nimport Footer from \"../component/Footer\"\r\nimport  { useEffect,  useState } from \"react\";\r\nimport { useNavigate } from \"react-router\";\r\nimport jwtDecode from 'jwt-decode';\r\n\r\n\r\n\r\nexport default function Cart() {\r\n    let token =\r\n        localStorage.getItem(\"_token\") !== undefined\r\n            ? localStorage.getItem(\"_token\")\r\n            : \"\";\r\n    let decode;\r\n    let email;\r\n    if (token !== null) {\r\n        decode = jwt_decode(token);\r\n        email = decode.oid;\r\n    }\r\n\r\n    const proceed = () => {\r\n        if (token !== null) {\r\n            localStorage.setItem(\"subtotal\", amount);\r\n            localStorage.setItem(\"gst\", gst);\r\n            localStorage.setItem(\"total\", grandtotal);\r\n            navigate(\"/checkout\");\r\n        } else {\r\n            alert(\"Login to buy\");\r\n            navigate(\"/login\");\r\n        }\r\n    }\r\n\r\n    let items=[];\r\n    const navigate = useNavigate();\r\n    const [cart, setCart] = useState([]);\r\n    \r\n    let total = [0];\r\n    const [quantity, setQuantity] = useState(\"\");\r\n    useEffect(() => {\r\n        let cartItems = JSON.parse(localStorage.getItem(\"mycart\"));\r\n        setCart(cartItems);\r\n    }, []);\r\n    console.log(cart);\r\n\r\n    const onChangeHandler = (event) => {\r\n        setQuantity(event.target.value);\r\n        console.log(event.target.value);\r\n    };\r\n\r\n    let amount;\r\n    let gst;\r\n    let grandtotal;\r\n\r\n    const onAdd = (product) => {\r\n        const exist = cart.find((item) => item._id === product._id);\r\n        if (exist) {\r\n            setCart(\r\n                cart.map((item) =>\r\n                    item._id === product._id\r\n                        ? { ...exist, quantity: exist.quantity + 1 }\r\n                        : item\r\n                )\r\n            );\r\n            localStorage.setItem(\"mycart\", JSON.stringify(cart));\r\n        } else {\r\n            setCart([...cart, { ...product, quantity: 1 }]);\r\n        }\r\n    };\r\n\r\n    const onRemove = (product) => {\r\n        const exist = cart.find((item) => item._id === product._id);\r\n        if (exist.quantity === 1) {\r\n            // setCart(cart.filter((item) => item._id !== product._id));\r\n        } else {\r\n            setCart(\r\n                cart.map((item) =>\r\n                    item._id === product._id\r\n                        ? { ...exist, quantity: exist.quantity - 1 }\r\n                        : item\r\n                )\r\n            );\r\n            localStorage.setItem(\"mycart\", JSON.stringify(cart));\r\n        }\r\n    };\r\n\r\n    const onDelete = (index) => {\r\n        let lstore = JSON.parse(localStorage.getItem(\"mycart\"));\r\n        lstore.splice(index, 1);\r\n        console.log(lstore);\r\n        let setStore = JSON.stringify(lstore);\r\n        localStorage.setItem(\"mycart\", setStore);\r\n        setCart(lstore);\r\n    };\r\n    return (\r\n        <div>\r\n        <Nav1/>\r\n        <br></br>\r\n        <div>\r\n        <Container style={{ backgroundColor: \"lightgray\" }}>\r\n                <Table striped bordered hover size=\"sm\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Sr.No</th>\r\n                            <th>Name</th>\r\n                            <th>Image</th>\r\n                            <th>Price</th>\r\n                            <th>Quantity</th>\r\n                            <th>Total</th>\r\n                            <th>Action</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {cart\r\n                            ? cart.map((value, index) => {\r\n                                  return (\r\n                                      <tr key={index}>\r\n                                          <td>{index + 1}</td>\r\n                                          <td>{value.name}</td>\r\n                                          <td ><img height=\"100px\" width=\"100px\" src={value.image}/></td>\r\n                                          <td>{value.price}/-</td>\r\n                                          <td>\r\n                                              <Row>\r\n                                                  <Col>\r\n                                                      <Button\r\n                                                          variant=\"dark\"\r\n                                                          onClick={() =>\r\n                                                              onRemove(value)\r\n                                                          }\r\n                                                      >\r\n                                                          -\r\n                                                      </Button>\r\n                                                  </Col>\r\n                                                  <Col>\r\n                                                      <Form.Control\r\n                                                          type=\"number\"\r\n                                                          placeholder=\"Enter quantity\"\r\n                                                          min=\"1\"\r\n                                                          max=\"20\"\r\n                                                          value={value.quantity}\r\n                                                         \r\n                                                      />\r\n                                                  </Col>\r\n                                                  <Col>\r\n                                                      <Button\r\n                                                          variant=\"dark\"\r\n                                                          onClick={() =>\r\n                                                              onAdd(value)\r\n                                                          }\r\n                                                      >\r\n                                                          +\r\n                                                      </Button>\r\n                                                  </Col>\r\n                                              </Row>\r\n                                          </td>\r\n                                          <td>\r\n                                              {value.quantity * value.price}\r\n                                          </td>\r\n                                          <td>\r\n                                              <Button\r\n                                                  variant=\"danger\"\r\n                                                  onClick={() =>\r\n                                                      onDelete(index)\r\n                                                  }\r\n                                              >\r\n                                                  Delete\r\n                                              </Button>\r\n                                          </td>\r\n                                          {console.log(\r\n                                              total.push(\r\n                                                  value.price * value.quantity\r\n                                              )\r\n                                          )}\r\n                                      </tr>\r\n                                  );\r\n                              })\r\n                            : \"\"}\r\n                    </tbody>\r\n                </Table>\r\n               \r\n                \r\n            </Container>\r\n            <Container>\r\n            <Card style={{width:\"20rem\" , margin:\"2rem\", padding:\"1rem\",textAlign:\"right\"}}>\r\n            <h5>Review Order</h5>\r\n            <br/>\r\n            <h6 className=\"text-right\">\r\n                    Subtotal:{\" \"}\r\n                    {(amount=total.reduce((result, number) => result + number)).toFixed(2)}\r\n                </h6>\r\n                <hr/>\r\n                <h6 className=\"text-right\">\r\n                {\" \"}\r\n                    GST 18%:{\" \"}\r\n                   {(gst=(amount * 18 ) / 100).toFixed(2) }\r\n                </h6>\r\n                <hr/>\r\n                <h6 className=\"text-right\">\r\n                     Total:{\" \"}\r\n                   {(grandtotal=(amount + gst).toFixed(2))}\r\n                   {\" \"}\r\n                </h6>\r\n               <br></br>\r\n                <Button variant='dark' onClick={()=>proceed()}>Proceed To Buy</Button>\r\n                </Card>\r\n            </Container>\r\n        </div>\r\n        <br></br>\r\n        <Footer/>\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}